---
title: "Gov 50 Final Project"
author: "Julia High"
description: "My final project"
output:
  distill::distill_article:
    self_contained: false
---
# INTRODUCTION: 

My research question is: “Do Democrat and Republican views on 5 major social issues differ by racial group?” My hypothesis is that yes, Democrat and Republican views on 5 major social issues will differ by racial group. For this project, the five key social issues I am investigating are abortion, LGBTQ+ rights, immigration, the environment, and the economy. The racial groups I am investigating are “White, non-Hispanic,” “Black, non-Hispanic,” “Hispanic,” “Asian or Native Hawaiian/other Pacific Islander, non-Hispanic,” and “Multiple races, non-Hispanic.” Additionally, I will use the two major parties, Democrats and Republicans, for my analysis. A lot of public opinion research collects respondents’ race, and responses are often analyzed through that lens. Given the history of racial polarization in the United States, analyzing different racial groups’ opinions can reveal interesting contrasts. However, I have not observed many analyses on racial differences within party groups. This is nonetheless significant, given that politicians spend considerable time targeting key racial demographics in elections. This analysis is particularly relevant given the upcoming presidential election in 2024. Additionally, the United States population is rapidly diversifying, so politicians will have no choice but to identify the needs and values of key racial demographic groups. Party players will no longer be able to take advantage of the fact that certain racial groups have historically voted for their party. I hope that my analysis will reveal nuances within party lines and across racial groups that may inspire more comprehensive research in this area. 
	
	**EXPLAIN THIS AND MY DATASET MORE
	**EXPLAIN THAT DATASET DIDN'T INCLUDE EVERYTHING I WANTED
	add a section called tidying and mutating data
	change colors on dependent graphs
	add lines at the bottom of my sections
	show the main variable regression and multiple regressoins
	add works cited
	learn to bold section titles
	**note that I changed my whole project from the milestones

# Data - Organizing, Mutating, and Labeling 

My data comes from the American National Election Studies 2020 Time Series study. This source is a public opinion survey of over 8,000 Americans in 2020 about a number of different topics. Party affiliation and race are self-reported in the survey.

I am measuring respondents’ views on my five key social issues based on the following survey questions.

Abortion
Question: There has been some discussion about abortion during recent years. Which one of the opinions on this page best agrees with your view? 
Response options: 1 (By law, abortion should never be permitted) through 4 (By law, a woman should always be able to obtain an abortion as a matter of personal choice).

LGBTQ+ Rights
Question: Which comes closest to your view [on gay marriage]? You can just tell me the number of your choice.
Response options: 1 (Gay and lesbian couples should be allowed to legally marry) through 3 (There should be no legal recognition of gay or lesbian couples’ relationship).

Immigration
Question: Which comes closest to your view about what government policy should be toward unauthorized immigrants now living in the United States?
Response options: 1 (Make all unauthorized immigrants felons and send them back to their home country) through 4 (Allow unauthorized immigrants to remain in US & eventually qualify for citizenship without penalties).

Environment
Question: Where would you place yourself on this scale, or haven’t you thought much about this?
Response options: 1 (Tougher regulations on business needed to protect environment) through 7 (Regulations to protect environment already too much a burden on business).

Economy
Question: What do you think about the state of the economy these days in the United States? Would you say the state of the economy is very good,good, neither good nor bad, bad, or very bad?
Response options: 1(Very good) through 5 (Very bad).

While these categories may not entirely reflect of respondents’ views on a given issue, they offer a solid foundation to reveal potential differences by race and party.

The research design for this study is cross-sectional.

My dependent variable summaries are below, with barplots with the numbers of participants that responded to the survey in a given way for each social issue. 

```{r}
library(tidyverse)
library(dplyr)
```

```{r}
voting_trends_2020 <- read_csv("anes_timeseries_2020_csv_20220210.csv")
voting_trends_2020
```

```{r}
voting_trends_2020 <- voting_trends_2020 |>
  select(V201549x, V201336, V201416, V201417, V201262, V201324, V201018, V201510, V201600) |>
  filter(
    V201549x >= 1,
    V201018 == 1 | V201018 == 2,
    V201336 %in% c(1,2,3,4),
    V201416 >= 1,
    V201417 >= 1,
    V201262 %in% c(1, 2, 3, 4, 5, 6, 7),
    V201324 >= 1,
    V201510 %in% c(1, 2, 3, 4, 5, 6, 7, 8),
    V201600 >= 1
  )
voting_trends_2020
```

```{r}
voting_trends <- voting_trends_2020 |>
  rename(
    race_num = V201549x,
    abortion_views = V201336,
    lgbtq_views = V201416,
    immigration_views = V201417,
    environment_views = V201262,
    economy_views = V201324,
    party = V201018,
    education_level = V201510,
    gender = V201600
  ) |>
  mutate(
    race = case_when(
      race_num == 1 ~ "White, non-Hispanic",
      race_num == 2 ~ "Black, non-Hispanic",
      race_num == 3 ~ "Hispanic",
      race_num == 4 ~ "Asian or Native Hawaiian/other Pacific Islander, non-Hispanic",
      race_num == 5 ~ "Native American/Alaska Native or other race, non-Hispanic",
      race_num == 6 ~ "Multiple races, non-Hispanic"
    ),
    party = if_else(party == 1, "Democrat", "Republican"),
    gender = if_else(gender == 1, "Male", "Female"),
    education_level = case_when(
      education_level == 1 ~ "Less than high school",
      education_level == 2 ~ "High school graduate",
      education_level == 3 ~ "Some college but no degree",
      education_level == 4 ~ "Associate degree in college - vocational",
      education_level == 5 ~ "Associate degree in college - academic",
      education_level == 6 ~ "Bachelor's degree",
      education_level == 7 ~ "Master's degree",
      education_level == 8 ~ "Professional school degree/doctoral degree"
    )
  )
voting_trends
```
# Data - Outcomes of Interest

This Outcome of Interest 1 plot visualizes the counts of respondents who answered 1 - 4 when asked "There has been some discussion about abortion during recent years. Which one of the opinions on this page best agrees with your view?" This plot demonstrates that, regardless of party or race, most respondents chose 4 indicating that they do support a woman's right to bodily autonomy.

```{r}
voting_trends_dependent_abortion <- voting_trends |>
  ggplot(mapping = aes(x = abortion_views)) +
           geom_bar() +
  labs(
    x = "Abortion Views Scale of 1-4",
    y = "Number of Respondents",
    title = "Outcome of Interest 1: All Respondents' Views on Abortion"
  )
voting_trends_dependent_abortion
```

This Outcome of Interest 2 plot visualizes the counts of respondents who answered 1 - 3 when asked "Which comes closest to your view [on gay marriage]?" This plot demonstrates that, regardless of party or race, most respondents chose 1 which suggests that they believe gay and lesbian couples should indeed be allowed to marry.

```{r}
voting_trends_dependent_lgbtq <- voting_trends |>
  ggplot(mapping = aes(x = lgbtq_views)) +
           geom_bar() +
  labs(
    x = "Gay Marriage Views Scale of 1-3",
    y = "Number of Respondents",
    title = "Outcome of Interest 2: All Respondents' Views on Gay Marriage"
  )
voting_trends_dependent_lgbtq
```
This Outcome of Interest 3 plot shows the number of respondents who answered 1 - 4 when asked "Which comes closest to your view about what government policy should be toward unauthorized immigrants now living in the United States?" This plot shows that, without our key independent variables of race and party, most respondents chose 3 which indicates that they believe the US should "Allow unauthorized immigrants to remain in US & eventually
qualify for citizenship but only if they meet requirements."

```{r}
voting_trends_dependent_immigration <- voting_trends |>
  ggplot(mapping = aes(x = immigration_views)) +
           geom_bar() +
  labs(
    x = "Immigration Views Scale of 1-4",
    y = "Number of Respondents",
    title = "Outcome of Interest 3: All Respondents' Views on Immigration"
  )
voting_trends_dependent_immigration
```
This Outcome of Interest 4 plot shows the number of respondents who answered 1 - 7 when asked "Where would you place yourself on this scale, or haven’t you thought much about this?" when asked about the tradeoff between supporting the environment and supporting businesses. This plot shows that, without our key independent variables of race and party, most respondents chose 1 which shows they believe that "Tougher regulations on business [are] needed to protect environment."

```{r}
voting_trends_dependent_environment <- voting_trends |>
  ggplot(mapping = aes(x = environment_views)) +
           geom_bar() +
  labs(
    x = "Environment Views Scale of 1-7",
    y = "Number of Respondents",
    title = "Outcome of Interest 4: All Respondents' Views on the Environment"
  ) 
voting_trends_dependent_environment
```
Finally, this Outcome of Interest 5 plot depicts the number of respondents who answered 1 - 5 when asked "What do you think about the state of the economy these days in the United States? Would you say the state of the economy is very good,good, neither good nor bad, bad, or very bad?" This plot shows that answers ranged widely, but most respondents chose 4 regardless of race or party, which shows that they believe the current state of economy is "bad." Note that this survey was taken in 2020 during a time of significant social and economic turmoil in the United States (and the world) due to the COVID-19 pandemic and racial tensions.

```{r}
voting_trends_dependent_economy <- voting_trends |>
  ggplot(mapping = aes(x = economy_views)) +
           geom_bar() +
  labs(
    x = "Economy Views Scale of 1-5",
    y = "Number of Respondents",
    title = "Outcome of Interest 5: All Respondents' Views on the Economy"
  )
voting_trends_dependent_economy
```

```{r}
library(patchwork)

(voting_trends_dependent_abortion)+(voting_trends_dependent_economy)+(voting_trends_dependent_environment)+(voting_trends_dependent_immigration)+(voting_trends_dependent_lgbtq)
```

# Results - Key Plots 

My results include a table and bar plots of respondents' average views on abortion by party and racial group, as well as regressions of of each social issue with race, party, and the confounders of education level and gender.

```{r}
voting_tibble <- voting_trends |>
  group_by(party, race) |>
  summarize(
    avg_abortion = mean(abortion_views),
    avg_lgbtq = mean(lgbtq_views),
    avg_immigration = mean(immigration_views),
    avg_environment = mean(environment_views),
    avg_economy = mean(economy_views)
  )
voting_tibble
```

Analysis Plot 1 shows respondents' average views on abortion for each party by racial group and party. COME BACK AND EXPLAIN EACH OF THESE. 

```{r}
abortion_plot <- voting_tibble |>
  ggplot(mapping = aes(x = party, y = avg_abortion, fill = race)) +
  geom_col(position = "dodge") +
  labs(x = "Party Affiliation",
       y = "Average Views on Abortion",
       title = "Analysis Plot 1: Average Views on Abortion by Party Affiliation and Racial Group") 
abortion_plot
```

Analysis Plot 2 shows respondents' average views on gay marriage for each party by racial group and party. 

```{r}
lgbtq_plot <- voting_tibble |>
  ggplot(mapping = aes(x = party, y = avg_lgbtq, fill = race)) +
  geom_col(position = "dodge") +
  labs(x = "Party Affiliation",
       y = "Average Views on Gay Marriage",
       title = "Analysis Plot 2: Average Views on Gay Marriage by Party Affiliation and Racial Group")
lgbtq_plot
```
Analysis Plot 3 shows respondents' average views on immigration for each party by racial group and party. 

```{r}
immigration_plot <- voting_tibble |>
  ggplot(mapping = aes(x = party, y = avg_immigration, fill = race)) +
  geom_col(position = "dodge") +
  labs(x = "Party Affiliation",
       y = "Average Views on Immigration",
       title = "Analysis Plot 3: Average Views on Immigration by Party Affiliation and Racial Group")
immigration_plot
```
Analysis Plot 4 shows respondents' average views on the environment for each party by racial group and party. 

```{r}
environment_plot <- voting_tibble |>
  ggplot(mapping = aes(x = party, y = avg_environment, fill = race)) +
  geom_col(position = "dodge") +
  labs(x = "Party Affiliation",
       y = "Average Views on the Environment",
       title = "Analysis Plot 4: Average Views on the Environment by Party Affiliation and Racial Group")
environment_plot
```
Analysis Plot 5 shows respondents' average views on the economy for each party by racial group and party. 


MAKE SURE TO ROUND NUMBERS
```{r}
economy_plot <- voting_tibble |>
  ggplot(mapping = aes(x = party, y = avg_economy, fill = race)) +
  geom_col(position = "dodge") +
  labs(x = "Party Affiliation",
       y = "Average Views on the Economy",
       title = "Analysis Plot 5: Average Views on the Economy by Party Affiliation and Racial Group")
economy_plot
```

# Results - Key Regressions

```{r}
rep_voting_trends <- voting_trends |>
  filter(
    party == "Republican"
  ) |>
  mutate(
    race3 = case_when(
      race_num == 1 ~ "White, non-Hispanic",
    race_num == 2 ~ "Black, non-Hispanic",
    race_num == 3 ~ "Hispanic",
    race_num == 4 ~ "Asian",
    race_num == 5 ~ "Native American",
    race_num == 6 ~ "Multiple races"
    ))
  
rep_voting_trends
```

```{r}
dem_voting_trends <- voting_trends |>
  filter(
    party == "Democrat"
  ) |>
  mutate(
    race2 = case_when(
      race_num == 1 ~ "White, non-Hispanic",
    race_num == 2 ~ "Black, non-Hispanic",
    race_num == 3 ~ "Hispanic",
    race_num == 4 ~ "Asian",
    race_num == 5 ~ "Native American",
    race_num == 6 ~ "Multiple races"
    ))
  
dem_voting_trends
```

For my regressions, I split my voting_trends data into views on each social issue among Democrats and Replicans, respectively. I then created two separate regressions for respondents' views on abortion, LGBTQ+ rights, immigration, the environment, and the economy for each party. In the regression, I analyzed respondents' views as the dependent variable, race as the independent variable, while controlling for eductaional level and gender. My analysis of each of the regressions is below.


#### Democrat Abortion Regression

This regression shows abortion views against the main independent variables race and party, as well as confounders of education level and gender. The intercept coefficient here 3.73723 shows the average view of Asian American Democrats with an academic Associate's degree who are women on the issue of abortion. You can find the other average view values by comparing the coefficient for each racial group to this one. Since I am mainly looking at party and race, I will outline those key outcomes while controlling for education (bachelor's degree) and gender here. 

The average view of Black Democrats with a bachelor's degree who are women is 3.60258. For men, it's 3.57298.
Women - sum(3.73723 asian + 0.03998 bachelor + -0.17463 black race)
Men - sum((3.73723 asian + 0.03998 bachelor + -0.17463 black race + -0.02960 men)

The average view of Black Republicans with a bachelor's degree who are women is 2.47573. For men, it's 
Women - sum(3.73723 asian + 0.03998 bachelor + -0.17463 black race + -1.12685 republican)

**not sure if i did education correctly. do i just add in another level of education?
```{r}
sum(3.73723 + 0.03998 + -1.12685 + -0.17463)
```

get each rergession separately, then compare them! being hispanic and democrat increases view on abortion by 0.5, but being hispanic and republican actually decreases view on abortion by -0.3


This first regression[INSERT TITLE] demonstrates Democrats' average views on abortion in the context of repsondents' race, while controlling for educational level and gender. The second regression shows the same, but for Republican views on abortion. As a reminder, a response of 1 means that abortion should never be permitted, and a response of 4 means that a woman should always be able to obtain an abortion. Thus, responses closer to 1 are the more conservative responses while responses closer to 4 are the more liberal ones.

These two regressions show the following outcomes: 

The first regression [INSERT TITLE] shows that being a Black Democrat decreases your opinion on abortion [AS COMPARED TO OTHER DEMOCRATS?] by -0.093479 while controlling for educational level and gender, while the second shows that being a Black Republican decreases your opinion on abortion by -0.961011 [AS COMPARED TO OTHER REPUBLICANS?] while controlling for those factors. The result for Black Republicans was statistically significant with a threshold of 0.01. This suggests that, when it comes to the abortion issue, identifying as Black may impact Republicans' views (making them more conservative) more than Democrats (instead of making views more liberal). Regardless of race, this result is still consistent how Republicans' average views on abortion were lower for every racial category, including Black, non-Hispanic in Analysis Plot 1. 
**can I say this last sentence? because would I have to say it for the next one? wtf am I comparing to? because technically in the next one republicans are still lower, just decreased less for republicans than decreased for democrats but democrat is still probably higher in general than republican

The first regression shows that being a Hispanic Democrat decreases your opinion on abortion by -0.235807 while controlling for the aforementioned confounders, while the second shows that being a Hispanic Republican decreases your opinion on abortion by -0.147738. This indicates that identifying as Hispanic may impact Democrats' views more than Republicans. The result for Hispanic Democrats was statistically significant with a threshold of 0.01.

**for each, note if statistically significant

The first regression shows that being multiple races and a Democrat may increase your opinion on abortion by 0.006750 while controlling for confounders. The second shows that being multiple races and a Republican may decrease your opinion on abortion by -0.142446 with controls. In this situation, being multiple races may impact Republican views more than Democrat views.

The first regression shows that being a Native American Democrat may decrease your views on abortion by -0.150027 with controls, and being a Native American Republican may decrease your views on the issue by -0.132529. When it comes to the issue of abortion, being Native American may impact Democrat views more than Republican views, but only by a small amount.

The first regression shows that being a White Democrat may decrease your views on abortion by -0.003517 while controlling for confounders, while being a White Republican may decrease your views by -0.109134. This suggests that being White has a greater impact on Republican views than Democrat views.

**make sure I understand causal
???i'm trying to show the impact of race against the average opinion of that party. the average opinion is the regression that I did the first time.

```{r}
abortion_regression_dem <- lm(abortion_views ~ race2 + education_level + gender, data = dem_voting_trends)
summary(abortion_regression_dem)
```

MODEL SUMMARY TEMPLATE
```{r}
modelsummary::modelsummary(abortion_regression_dem,
                           statistic = c("s.e. = {std.error}",
                                         "p = {p.value}"),
                           gof_map = c("nobs", "r.squared", "adj.r.squared"),
                           coef_rename = c(
                             "(Intercept)" = "Intercept",
                             "race2Black, non-Hispanic" = "Black, non-Hispanic",
                             "race2Hispanic" = "Hispanic",
                             "race2Multiple races" = "Multiple races, non-Hispanic",
                             "race2Native American" = "Native American/Alaska Native or other race, non-Hispanic",
                             "race2White, non-Hispanic" = "White, non-Hispanic",
                             "education_levelAssociate degree in college - vocational" = "Associate's degree in college - vocational",
                             "education_levelBachelor's degree" = "Bachelor's degree",
                             "education_levelHigh school graduate" = "High school graduate",
                             "education_levelLess than high school" = "Less than high school",
                             "education_levelMaster's degree" = "Master's degree",
                             "education_levelProfessional school degree/doctoral degree" = "Professional school/doctoral degree",
                             "education_levelSome college but no degree" = "Some college, but no degree",
                             "genderMale" = "Male"
                             )
                           )
```

republican abortion regression
**make everything look nice with modelsummary after I take note of the statistical significance

```{r}
abortion_regression_rep <- lm(abortion_views ~ race3 + education_level + gender, data = rep_voting_trends)
summary(abortion_regression_rep)
```

LGBTQ  regression dems

This first regression[INSERT TITLE] demonstrates Democrats' average views on abortion in the context of repsondents' race, while controlling for educational level and gender. The second regression shows the same, but for Republican views on abortion. As a reminder, a response of 1 means that abortion should never be permitted, and a response of 4 means that a woman should always be able to obtain an abortion. Thus, responses closer to 1 are the more conservative responses while responses closer to 4 are the more liberal ones.

These two regressions show the following outcomes: 

The first regression [INSERT TITLE] shows that being a Black Democrat decreases your opinion on abortion

```{r}
lgbtq_regression_dem <- lm(lgbtq_views ~ race2 + education_level + gender, data = dem_voting_trends)
summary(lgbtq_regression_dem)
```

LGBTQ  regression republicans
*can't add party because it's just the one party in here
how do 
```{r}
lgbtq_regression_rep <- lm(lgbtq_views ~ race3 + education_level + gender, data = rep_voting_trends)
summary(lgbtq_regression_rep)
```

immigration regression DEMS
```{r}
immigration_regression_dem <- lm(immigration_views ~ race2 + education_level + gender, data = dem_voting_trends)
summary(immigration_regression_dem)
```

immigration regression REPUBLICANS
```{r}
immigration_regression_rep <- lm(immigration_views ~ race3 + education_level + gender, data = rep_voting_trends)
summary(immigration_regression_rep)
```

environment regression DEMS
```{r}
environment_regression_dem <- lm(environment_views ~ race2 + education_level + gender, data = dem_voting_trends)
summary(environment_regression_dem)
```


environment regression REPUBLICANS

```{r}
environment_regression_rep <- lm(environment_views ~ race3 + education_level + gender, data = rep_voting_trends)
summary(environment_regression_rep)
```

economy regression dems
```{r}
economy_regression_dems <- lm(economy_views ~ race2 + education_level + gender, data = dem_voting_trends)
summary(economy_regression_dems)
```

economy regression republicans

```{r}
economy_regression_rep <- lm(economy_views ~ race3 + education_level + gender, data = rep_voting_trends)
summary(economy_regression_rep)
```



```{r}
library(stargazer)
stargazer(abortion_regression_dem, abortion_regression_rep, type = "text")
```




























get each rergession separately, then compare them! being hispanic and democrat increases view on abortion by 0.5, but being hispanic and republican actually decreases view on abortion by -0.3


This regression shows abortion views against the main independent variables race and party, as well as confounders of education level and gender. The intercept coefficient here 3.73723 shows the average view of Asian American Democrats with an academic Associate's degree who are women on the issue of abortion. You can find the other average view values by comparing the coefficient for each racial group to this one. Since I am mainly looking at party and race, I will outline those key outcomes while controlling for education (bachelor's degree) and gender here. 

The average view of Black Democrats with a bachelor's degree who are women is 3.60258. For men, it's 3.57298.
Women - sum(3.73723 asian + 0.03998 bachelor + -0.17463 black race)
Men - sum((3.73723 asian + 0.03998 bachelor + -0.17463 black race + -0.02960 men)

The average view of Black Republicans with a bachelor's degree who are women is 2.47573. For men, it's 
Women - sum(3.73723 asian + 0.03998 bachelor + -0.17463 black race + -1.12685 republican)

**not sure if i did education correctly. do i just add in another level of education?
```{r}
sum(3.73723 + 0.03998 + -1.12685 + -0.17463)
```

The average view of Black Democrats while controlling for education and gender is BLANK. (remove the associates degree and gender, add race) 
- remove gender
- remove education
- add black race
- add democrat party
if I remove all that, i'll just have what I did in my chart won't I? Isn't the point of doing the regression to include the confounders? i just won't include all educational levels then. black dems 3.5 on average not controlling for other factors

Average view of Black Democrats with a bachelor's degree who are women is blank. 
Average view of bla bla men is blank.

The average view of Black Republicans is BLANK 

The average view of Hispanic Democrats is BLANK. The average view of Hispanic Republicans is BLANK. The average view of multiracial Democrats is BLANK. The average view of multiracial Republicans is BLANK. The average view of Native American Democrats is BLANK. The average view of Native American Republicans is BLANK. The average view of White Democrats is BLANK. Finally, the average view of white Republicans is BLANK 

this is statistically significant

look at the prt thing to see if it's statistically significant
** do model summary

```{r}
abortion_regression <- lm(abortion_views ~ race + party + education_level + gender, data = voting_trends)
summary(abortion_regression)
```
**intercept represents avg lvl asian american  democrats
it's showing racial categories among democrats
**MAKE SURE TO RENAME COEFFICIENTS ON ALL REGRESSIONS
**MAKE SURE TO CITE DATA SOURCE



could filter one regression on dems and one on republicans
how hispanic affects dems, how affects reps



```{r}
lgbtq_regression <- lm(lgbtq_views ~ race + party + education_level + gender, data = voting_trends)
summary(lgbtq_regression)
```


```{r}
immigration_regression <- lm(immigration_views ~ race + party + education_level + gender, data = voting_trends)
summary(immigration_regression)
```

```{r}
environment_regression <- lm(environment_views ~ race + party + education_level + gender, data = voting_trends)
summary(environment_regression)
```

```{r}
economy_regression <- lm(economy_views ~ race + party + education_level + gender, data = voting_trends)
summary(economy_regression)
```

# Conclusion: 

# Works Cited

American National Election Studies. 2021. ANES 2020 Time Series
Study Full Release [dataset and documentation]. July 19, 2021
version. www.electionstudies.org
